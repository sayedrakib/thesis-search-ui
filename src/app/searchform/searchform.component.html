<!--<ss-multiselect-dropdown [options]="myOptions" [(ngModel)]="selectedOptions" (ngModelChange)="onChange($event)"></ss-multiselect-dropdown>-->


<div class="search-cmp-container">

	<div *ngIf="error_msg" class=" alert alert-danger"> Tapahtui virhe. Ota yhteyttä kirjaston verkkopalveluihin osoitteesta kirjasto-vepa@jyu.fi.</div>


	<div class="form-container">
		<form novalidate #queryData="ngForm" (ngSubmit)="goSearch(queryData)">

			<div class="row">

				<div class="col-sm-9">
					<input [(ngModel)]="textInput" type="search" pattern="[a-zäöåA-ZÄÖÅ0-9-\s]+" class="form-control text-input" name="searchText"
						#searchText="ngModel" minlength="3" maxlength="100">
				</div>
				<div class="col-sm-3">
					<button [disabled]="error_msg" type="submit" class="btn btn-default center-block btn-block search-btn">Hae 
						<ng-progress  [thick]="false" [positionUsing]="'translate3d'"></ng-progress>
					</button>
				</div>
				<!--
				<div class="col-sm-1">
					<span type="button" class="btn glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="modal" data-target="#myModal"> </span>
				</div>
				-->
			</div>
			<br>

			<div class="row">
				<div class="col-sm-2 text-center ">

					<div> <label>Menetelmä</label> </div>

					<div>
						<ss-multiselect-dropdown [disabled]="!methods" [(ngModel)]="selected_methods_ids" name="selected_methods" [options]="methods"
							[settings]="settings_forSearch" [texts]="defaultTitle_method"></ss-multiselect-dropdown>
					</div>

				</div>
				<div class="col-sm-2 text-center">
					<div><label>Tieteenala</label></div>

					<div>
						<ss-multiselect-dropdown [disabled]="!disciplines" [(ngModel)]="selected_disciplines_ids" name="selected_disciplines" [options]="disciplines"
							[settings]="settings_forSearch" [texts]="defaultTitle_discipline"></ss-multiselect-dropdown>
					</div>


				</div>
				<div class="col-sm-2 text-center">
					<div> <label>Taso</label> </div>

					<div>
						<ss-multiselect-dropdown [(ngModel)]="selected_levels_ids" name="selected_levels" [options]="levels" [settings]="settings_levels"
							[texts]="defaultTitle_level"></ss-multiselect-dropdown>
					</div>

				</div>
				<div class="col-sm-3 text-center year-div">


					<div class="from-div col-sm-6">
						<div><label>Vuodesta</label></div>
						<div>
							<ss-multiselect-dropdown [(ngModel)]="selected_yearFrom" name="yearFrom" [options]="listofYears" [settings]="settings_year"
								[texts]="defaultTitle_discipline"></ss-multiselect-dropdown>
						</div>

					</div>

					<div class="to-div col-sm-6">
						<div><label>Vuoteen</label></div>
						<div>
							<ss-multiselect-dropdown [(ngModel)]="selected_yearTo" name="yearTo" [options]="listofYears" [settings]="settings_year" [texts]="defaultTitle_discipline"></ss-multiselect-dropdown>
						</div>

					</div>


				</div>
				<div class="col-sm-2 checkbox-fulltext">
					<div> <label>PDF saatavissa</label> </div>
					<input class="checkbox-fulltext" type="checkbox" [(ngModel)]="fulltext" name="fulltext">

				</div>
				<div class="col-sm-1">
					<div class="label-instruction"> <label>  </label> </div>
					<span title="Haun käyttöohje ja kuvaus sisällöstä." id="btn-instruction" type="button" class="btn glyphicon glyphicon-info-sign" aria-hidden="true" data-toggle="modal" data-target="#instruction-modal"> </span>
				</div>

			</div>

		</form>
	</div>

	<div class="show-hide-link">
		<a (click)="show_selections = !show_selections">
			<span *ngIf="!show_selections" class="glyphicon glyphicon-chevron-right"></span>
			<span *ngIf="show_selections" class="glyphicon glyphicon-chevron-down"></span> Hakuvalinnat
		</a>
	</div>

	<!--	<button type="button" class="" data-toggle="modal" data-target="#myModal"><i class="fa fa-info-circle" aria-hidden="true"></i></button> -->

	<!-- div for selected options, hidden/ shown -->
	<div *ngIf="show_selections" class="selected-options" name="divToggle">

		<div>
			<dl>
				<dt *ngIf="selected_methods_ids[0]">Menetelmät</dt>

				<dd class="dd-selected-options" *ngFor="let method_id of selected_methods_ids"> {{method_id}}</dd>

				<dt *ngIf="selected_disciplines_ids[0]">Tieteenalat</dt>

				<dd class="dd-selected-options" *ngFor="let discipline_id of selected_disciplines_ids"> {{discipline_id}}</dd>

				<dt *ngIf="selected_levels[0]">Tasot</dt>

				<dd class="dd-selected-options" *ngFor="let level of selected_levels">{{level.name}}</dd>
			</dl>
		</div>
	</div>
	<!-- Modal - instructions for use -->
	<div id="instruction-modal" class="modal fade" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Opinnäytehaun sisältö ja käyttö</h4>
				</div>
				<div class="modal-body">
					<p>Käytetty tukimusmenetelmä on tallennettu väitöskirjojen ja pro gradu -tutkielmien osalta vuodesta 2009 eteenpäin. Kaikkiaan noin 8% väitöskirjoista ja 4% pro gradu -tutkielmien kuvailutiedoista sisältää tiedon tutkimusmenetelmästä. Lisensiaatintöissä, kandidaatintutkielmissa ja muissa opinnäytteissä tieto on tallennettu vain yksittäisten töiden tapauksessa.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Sulje</button>
				</div>
			</div>

		</div>
	</div>
</div>
